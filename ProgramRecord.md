### Vue项目流程及注意点

#### vuex

1. 业务之间耦合度低的话不必用vuex，直接用独立的data
2. 某些数据例如token，用户信息，或者是全局的个人偏好设置等需要用vuex来保存，具体看业务场景

**My-vue-backprogram登录出现配置问题，先搁置**

####  移动端适配

1. 使用Viewport单位：Viewport单位是相对于设备视口大小的单位，包括vw（视口宽度的百分比）、vh（视口高度的百分比）、vmin（vw和vh中较小的值）和vmax（vw和vh中较大的值）。通过使用Viewport单位，可以根据设备的屏幕尺寸动态调整元素的大小和布局。
2. 弹性布局（Flexbox）：Flexbox是一种弹性布局模型，可以用于实现灵活的、自适应的布局。通过使用Flexbox，可以轻松创建适应不同屏幕尺寸和方向的布局，同时处理各种设备上的响应式排列和对齐。
3. 媒体查询（Media Queries）：媒体查询是CSS中的一种技术，可以根据设备的特性和屏幕尺寸应用不同的样式。通过使用媒体查询，可以针对不同的屏幕尺寸、设备方向或像素密度等条件，定义不同的样式规则，从而适应不同的移动设备。
4. 使用第三方库：有一些专门用于移动端适配的Vue插件和库，如Vant、Mint UI等。这些库提供了一些移动端常用组件和布局，能够更方便地实现适配效果。
5. REM单位：REM单位是相对于根元素（html）的字体大小的单位。通过设置根元素的字体大小，并使用REM单位来定义其他元素的尺寸，可以实现根据根元素的字体大小自适应调整其他元素的大小。
6. 手动计算和适配：根据项目的需求和特殊情况，你也可以手动计算和适配元素的大小和位置。通过监听窗口大小变化事件，计算和调整元素的样式，以适应不同的设备屏幕。

#### 前端常用设计模式

在前端开发中，常用的设计模式包括：

1. 观察者模式（Observer Pattern）：用于在对象之间建立一对多的依赖关系，当一个对象的状态发生改变时，其依赖的对象会自动得到通知并进行相应的更新。例子：一个电子商务网站中的购物车功能。购物车作为观察者，当商品加入或移除时，购物车会自动更新并通知相关的观察者（如总价计算器）进行更新。

2. 单例模式（Singleton Pattern）：确保一个类只有一个实例，并提供一个全局访问点，用于管理全局状态或资源。

3. 工厂模式（Factory Pattern）：通过定义一个创建对象的接口，将对象的实例化延迟到子类或具体工厂类中，使得客户端代码与具体类的实现解耦。

4. 装饰者模式（Decorator Pattern）：动态地将责任附加到对象上，通过一系列的包装器（装饰者）来扩展对象的功能，而不影响其他对象。

5. 适配器模式（Adapter Pattern）：将一个类的接口转换为客户端所期望的另一个接口，使得原本由于接口不兼容而不能一起工作的类能够协同工作。

6. 策略模式（Strategy Pattern）：定义一系列的算法，并将其封装成独立的对象，使得它们可以互相替换，从而使得算法的变化独立于使用算法的客户端。

7. MVC（Model-View-Controller）模式：将应用程序分为模型（数据层）、视图（用户界面层）和控制器（业务逻辑层），实现数据、界面和行为的分离。

8. MVVM（Model-View-ViewModel）模式：在MVC的基础上引入了ViewModel层，通过数据绑定实现模型与视图的自动同步，减少了界面代码和业务逻辑的耦合度。

这些设计模式都有各自的特点和适用场景，可以根据具体的需求和项目情况选择合适的设计模式来提高代码的可维护性、灵活性和可扩展性。

每个设计模式举一个简单的例子：

1. 观察者模式（Observer Pattern）：
   例子：一个电子商务网站中的购物车功能。购物车作为观察者，当商品加入或移除时，购物车会自动更新并通知相关的观察者（如总价计算器）进行更新。

2. 单例模式（Singleton Pattern）：
   例子：一个日志记录器的实现。通过单例模式，确保只有一个日志记录器实例存在，全局代码可以通过该实例来记录日志。

3. 工厂模式（Factory Pattern）：
   例子：一个图表库的实现，通过工厂模式创建不同类型的图表对象，如饼图、柱状图等。

4. 装饰者模式（Decorator Pattern）：
   例子：一个用户身份验证功能的实现。通过装饰者模式，可以在用户登录的基础上添加额外的功能，如记住登录状态、验证用户权限等。

5. 适配器模式（Adapter Pattern）：
   例子：一个音频播放器应用，支持多种格式的音频文件。通过适配器模式，将不同格式的音频文件适配为统一的接口，使得播放器可以播放所有支持的音频格式。

6. 策略模式（Strategy Pattern）：
   例子：一个支付方式选择功能的实现。通过策略模式，可以定义多种支付策略（如支付宝、微信支付等），用户可以根据需求选择不同的支付方式。

7. MVC（Model-View-Controller）模式：
   例子：一个简单的待办事项列表应用。模型（Model）保存事项数据，视图（View）负责显示列表和用户交互，控制器（Controller）处理用户的输入和更新模型。

8. MVVM（Model-View-ViewModel）模式：
   例子：一个用户注册表单的实现。ViewModel负责管理表单数据和验证规则，视图通过数据绑定与ViewModel进行交互，并实时反映数据的变化。

这些例子只是简单的示意，实际应用中可能会更加复杂和多样化，但可以帮助理解各个设计模式的概念和用法。

#### 后台管理项目注意点

##### 面包屑

1. 默认有一个首页标签
2. 点击其他的页面会在面包屑中添加其标题
3. 点击已有的标签会跳转，且不会添加新的标签

##### 架构问题

在Vue进行框架构建时，通常可以按照以下步骤进行操作：

1. 初始化项目：首先，需要在你的开发环境中创建一个新的Vue项目。你可以使用Vue官方提供的命令行工具Vue CLI来快速初始化一个基本的Vue项目结构。

2. 定义项目结构：根据你的项目需求，确定项目的目录结构和组织方式。这包括确定项目的主要文件夹、子文件夹和文件命名约定。常见的文件夹包括components（组件）、views（视图）、assets（静态资源）等。

3. 创建组件：根据项目的功能和需求，创建Vue组件。每个组件可以包含模板（template）、样式（style）和逻辑代码（script）。合理地拆分组件可以提高代码的可维护性和复用性。

4. 配置路由：如果你的项目需要多个页面或路由功能，可以使用Vue Router进行路由管理。你需要定义路由表，指定每个路由对应的组件，并将路由器配置到你的Vue应用中。

5. 状态管理：对于大型应用，你可能需要使用Vue的状态管理模式，如Vuex，来管理全局状态。通过Vuex，你可以集中管理应用的状态，并在组件之间共享数据。

6. 样式定义：为项目定义基本的样式规范和样式库。你可以选择使用CSS预处理器（如Sass、Less）来增强样式定义的灵活性和可维护性。在Vue项目中，你可以使用样式作用域和组件样式隔离的特性，使样式仅适用于特定的组件。

7. 数据交互：在Vue应用中，你可能需要与后端API进行数据交互。你可以使用Vue的内置功能（如Axios）或其他HTTP库来发送HTTP请求，并处理响应数据。

8. 运行和构建：在开发阶段，你可以使用Vue CLI提供的开发服务器进行实时预览和热重载。一旦准备部署到生产环境，你可以使用Vue CLI提供的构建命令将Vue应用打包成可部署的静态文件。

9. 测试和调试：编写测试用例并进行单元测试和端到端测试，以确保Vue应用的质量和稳定性。你可以使用Vue Test Utils和其他测试框架来进行测试。此外，在开发过程中，你可以使用浏览器的开发者工具和Vue开发者工具进行调试。

10. 部署和发布：最后，根据你的部署需求，将打包好的Vue应用部署到适当的环境中。你可以将静态文件部署到Web服务器、容器化平台或云服务提供商，并配置适当的域名、SSL

证书等。

以上是一般构建Vue框架的常见步骤，具体步骤和流程可能会根据项目的规模和需求有所变化。

##### 动态添加路由刷新丢失的问题

当使用动态路由时，刷新页面可能会导致路由信息丢失的问题。这是因为刷新页面时，浏览器会重新加载应用，并且重新初始化路由状态，导致动态路由信息丢失。

为了解决这个问题，你可以考虑以下三种方法：

1. 使用后端路由配置：将路由信息保存在后端，每当页面刷新时，向后端发送请求获取路由信息。这样可以确保在刷新页面后仍能获取到正确的动态路由信息。你可以使用Vue Router的`beforeEach`钩子函数来发送请求获取路由信息，并将其添加到路由配置中。

2. 使用持久化存储：将路由信息保存在浏览器的本地存储中，如`localStorage`或`sessionStorage`。在每次初始化应用时，先从本地存储中获取路由信息，如果存在则使用该信息进行路由初始化。这样可以在刷新页面后保留路由信息。

下面是一个使用持久化存储的示例：

```javascript
// main.js
import Vue from 'vue'
import App from './App.vue'
import router from './router'

// 在页面刷新前将路由信息保存到本地存储
window.addEventListener('beforeunload', () => {
  const routes = JSON.stringify(router.getRoutes())
  localStorage.setItem('routes', routes)
})

// 从本地存储中获取路由信息
const routes = localStorage.getItem('routes')
if (routes) {
  router.addRoutes(JSON.parse(routes))
}

new Vue({
  router,
  render: h => h(App)
}).$mount('#app')
```

通过以上方法，你可以在刷新页面后保留动态路由的信息，从而解决动态路由刷新丢失的问题。请根据你的具体需求选择适合的解决方案。

3. 在addRoute前进行判断是否已添加当前路由，已添加直接跳转`next()`，没有添加就添加并且使用`next(to)`

#### 项目部署

要在Vue项目中使用Nginx实现反向代理，你可以按照以下步骤进行配置：

1. 安装Nginx：
   - 根据你的操作系统，安装适合的Nginx版本。可以通过包管理器（如apt、yum）或者官方网站下载安装。

2. 配置Nginx：
   - 打开Nginx配置文件，通常是位于 `/etc/nginx/nginx.conf` 或 `/etc/nginx/conf.d/default.conf`。
   - 在 `http` 配置块内添加一个新的 `server` 块来配置反向代理。

3. 配置反向代理：
   - 在 `server` 块内，使用 `location` 指令来配置需要代理的路径和目标服务器。
   - 示例配置如下，将 `/api` 的请求代理到 `http://api.example.com`：
   
     ```nginx
     server {
         listen 80;
         server_name your-domain.com;
     
         location /api {
             proxy_pass http://api.example.com;
         }
     
         location / {
             root /path/to/vue/dist;
             try_files $uri $uri/ /index.html;
         }
     }
     ```

     在上述示例中，将 `/api` 的请求转发到 `http://api.example.com`，而其他请求则会被映射到 Vue 项目的静态文件目录。

4. 保存配置文件并重新加载Nginx：
   - 配置文件保存后，通过运行 `nginx -t` 命令来检查配置文件语法是否正确。
   - 如果没有错误，运行 `nginx -s reload` 命令来重新加载Nginx配置。

5. 测试反向代理：
   - 启动 Vue 项目，并访问配置的域名或IP地址。
   - 所有以 `/api` 开头的请求将被代理到指定的目标服务器。

通过以上步骤，你可以在Vue项目中使用Nginx实现反向代理，将特定路径的请求转发到其他服务器。请根据你的具体项目需求，修改 Nginx 配置以适应你的环境和路由规则。

###小程序

#### 微信小程序登录流程

微信小程序的登录流程可以概括为以下几个步骤：

1. 用户打开小程序：用户在微信中打开小程序，并进入登录页面或需要登录的功能页面。

2. 获取用户授权：小程序通过调用微信的登录接口，弹出授权登录的窗口，向用户请求获取其微信账号的基本信息和授权登录的权限。

3. 用户确认授权：用户在授权登录窗口中确认授权登录，允许小程序获取其基本信息和授权登录的权限。

4. 获取登录凭证：用户确认授权后，微信服务器会返回给小程序一个临时登录凭证code。

5. 调用登录凭证接口：小程序将获取到的临时登录凭证code发送到自己的服务器。

6. 服务器校验登录凭证：小程序的服务器收到临时登录凭证code后，需要调用微信的登录凭证校验接口，将临时登录凭证code发送给微信服务器进行校验。

7. 微信服务器返回用户唯一标识：微信服务器通过校验后，会返回给小程序服务器一个包含用户唯一标识openid和会话密钥session_key的响应。

8. 生成自定义登录态：小程序服务器使用获取到的openid和session_key，结合自定义的登录算法，生成一个自定义的登录态（例如token或session_id）。

9. 返回登录态给小程序：小程序服务器将生成的登录态返回给小程序客户端。

10. 登录态存储和使用：小程序客户端将登录态存储在本地，后续与小程序服务器进行通信时，需要携带该登录态，以便服务器验证用户的身份和权限。

以上是微信小程序登录的一般流程，具体实现可能会有一些变化，但整体流程大致相同。登录态的有效期可以根据需要进行设置，一般情况下会有一定的时效性，需要用户重新登录获取新的登录态。

#### 小程序的分包大小

在微信小程序的分包和不分包情况下，允许的最大包大小是有一定差异的。

对于不分包的情况，即将所有代码和资源打包在一个包中，最大包大小限制为2MB。

对于分包的情况，即将代码和资源划分为多个子包，最大包大小限制为8MB。其中主包的最大限制为2MB，而分包的最大限制为4MB。

需要注意的是，上述包大小限制仅适用于小程序代码的大小，不包括运行时框架的大小和一些基础库的大小。此外，包大小也会因小程序所处的环境（开发版、体验版、正式版）而有所不同。

如果小程序的代码和资源超过了包大小限制，您需要进行优化和精简，减小包的大小。一些优化方法包括压缩代码、合并资源、删除无用代码和资源等。此外，您还可以考虑使用分包加载功能，将一些非关键的代码和资源延迟加载。

在实际开发中，建议根据小程序的需求和实际情况，合理规划和管理代码和资源，以保持包的大小在限制范围内，并确保小程序的性能和用户体验。